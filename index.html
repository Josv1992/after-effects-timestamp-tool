<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        const inputString = "00:00 Crypsis - The 6th Pathway\n03:40 Zany - Freakz\n06:07 A-Lusion - Freeek It Up\n08:16 Hunter - Sweetie (Tuneboy Remix)";
        const FPS = 60;

        const processTracklist = (input) => {
            let outputString = '';

            const lines = input.split('\n');

            const lastLine = lines[lines.length - 1].split(' ').slice(1).join(' ').trimStart();

            for (let i = 0; i < lines.length - 1; i++) {
                const line = lines[i];
                const firstSpaceIndex = line.indexOf(' ');

                const timestamp = convertTimeToFrames(lines[i + 1].split(' ')[0]);
                const trackName = line.slice(firstSpaceIndex + 1).trim();

                outputString += `if (t < ${timestamp}) {
    "${trackName}"
} else `;
            }

            outputString += `{
    "${lastLine}"
}`;
            return outputString;
        }


        function convertTimeToFrames(time) {
            let [minutes, seconds] = time.split(':');
            return parseInt(minutes) * 60 * FPS + parseInt(seconds) * FPS;
        }


        document.addEventListener("DOMContentLoaded", () => {
            const outputDiv = document.getElementById('outputDiv');

            const inputTextArea = document.getElementById('inputTextArea');
            const processButton = document.getElementById('processButton');
            const copyButton = document.getElementById('copyButton');

            processButton.addEventListener('click', () => {
                outputDiv.innerText = processTracklist(inputTextArea.value);
                copyButton.style.visibility = 'visible';
            });
        });

        function copyToClipboard() {
            const outputDiv = document.getElementById('outputDiv');
            const textToCopy = outputDiv.innerText;

            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    showNotification('Result copied to clipboard!', 'success');
                })
                .catch(err => {
                    showNotification(err, 'error');
                });
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerText = message;

            if (type === 'success') {
                notification.style.backgroundColor = '#8dd088';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#a25656';
            }
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 1000);
        }

    </script>
</head>
<link href="/css/style.css" rel="stylesheet" type="text/css" />

<body>

<div class="container">
    <label for="inputTextArea">Input:</label>
    <textarea id="inputTextArea" name="tracklist" rows="10" cols="50" placeholder="Tracklist"></textarea>
    <button id="processButton">Process</button>

    <p>Result:</p>
    <div class="output-container">
    <pre>
        <code id="outputDiv">

        </code>
    </pre>
    </div>
    <button class="copy-button" id="copyButton" onclick="copyToClipboard()">Copy To Clipboard</button>
</div>



</body>
</html>